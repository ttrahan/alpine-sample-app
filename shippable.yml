# Language setting
language: node_js

env:
  global:
    - REGISTRY_URL=ttrahan # {account name}
    - REPO=alpine-sample-docker

build:
  pre_ci:
    - docker build -t="$REGISTRY_URL/$REPO:$BRANCH.$BUILD_NUMBER" .
    - docker push $REGISTRY_URL/$REPO:$BRANCH.$BUILD_NUMBER

  pre_ci_boot:
    image_name: ttrahan/shippable-alpine
    image_tag: $BRANCH.$BUILD_NUMBER
    pull: true
    options: "-e HOME=/root"

  ci:
    - echo 'CI is running'

integrations:
  hub:
    - integrationName: "Docker Hub"
      type: docker
